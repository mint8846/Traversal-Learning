services:
  odc:
    build:
      context: ..
      dockerfile: build/Dockerfile
    tty: true
    stdin_open: true
    privileged: true
    environment:
      # ODC container ID (Hash). If not provided, validation is skipped
      - ODC_ID=1f6192368575283bd3eb84801033cc94f7e6a5c94658f8151d846ed0e3108fc4
      # If specified, only allow that UDC ID. Otherwise, allow all
      - UDC_ID=aac2b58fd443a967be57a9709b0e3bbe8fa0624809575864d7f9f97843308383
      - OTP_SEED=
      - UDC_SERVER=http://udc:8080
      # Model execution script. Script is separated to set custom parameters and environment variables. Default: /model/script.sh
      - MODEL_SCRIPT=
      # Model execution result file name
      - MODEL_OUTPUT_FILE_NAME=
    volumes:
      # require
      - /var/run/docker.sock:/var/run/docker.sock
      # Must specify the paths to the actual model script file
      - ./script.sh:/model/script.sh
      # Container execution result. Returns error if file is missing or result is not success
      # Fixed internal path: /tmp/odc/result.txt
      - ./result/:/tmp/odc/

    networks:
      - shared-network

networks:
  shared-network:
    # Use externally created network
    external: true